{"version":3,"sources":["components/jackpot.ts"],"names":[],"mappings":"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","file":"components/jackpot.js","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport {jackpotUserInterface, jackpotInfoInterface, jackpotStakesInterface } from '../../app/classes/jackpotUserInterface';\r\n\r\nimport {JackpotSvc} from '../../app/services/JackpotSvc';\r\n\r\n\r\ndeclare var jQuery: any;\r\n\r\n@Component({\r\n    selector: 'jackpot-selector',\r\n    templateUrl: 'app/views/jackpot/index.html',\r\n    providers: [JackpotSvc]\r\n})\r\nexport class JackpotComponent implements OnInit {\r\n\r\n    private users: any;\r\n    private prevActions: Object;\r\n    private winnerInfo: jackpotUserInterface = {\r\n        id: 0,\r\n        name: '',\r\n        cost: 0,\r\n        currency: ''\r\n    };\r\n\r\n    private jackpotInfo: jackpotInfoInterface = {\r\n        fee: 0,\r\n        entries: 0,\r\n        total: 0,\r\n        currency: ''\r\n    }\r\n\r\n\r\n    private lowStakeInfo: jackpotStakesInterface = {\r\n        name: '',\r\n        current_pot: 0,\r\n        more_to_go: 0,\r\n        currency: ''\r\n    }\r\n\r\n    private highStakeInfo: jackpotStakesInterface = {\r\n        name: '',\r\n        current_pot: 0,\r\n        more_to_go: 0,\r\n        currency: ''\r\n    }\r\n\r\n    constructor(private Jackpot: JackpotSvc) {\r\n          \r\n    }\r\n\r\n\r\n    public getUsers(): Promise<jackpotUserInterface[]> {\r\n        return this.Jackpot.getJackpotUsers().then(\r\n            users => this.users = users\r\n        );\r\n    }\r\n\r\n    public getPreviousAction(): Promise<jackpotUserInterface[]> {\r\n        return this.Jackpot.getPreviousAction().then(\r\n            prevActions => this.prevActions = prevActions\r\n        );\r\n    }\r\n\r\n    public getWinnerInfo(): Promise<jackpotUserInterface[]> {\r\n        return this.Jackpot.getWinnerInfo().then(winner => this.winnerInfo = winner['0']);\r\n    }\r\n\r\n    public getJackpotInfo(): Promise<jackpotInfoInterface> {\r\n        return this.Jackpot.getjackPotInfo().then(data => this.jackpotInfo = data);\r\n    }\r\n\r\n    public getLowStakeInfo(): Promise<jackpotStakesInterface> {\r\n        return this.Jackpot.getLowStakeInfo().then(data => this.lowStakeInfo = data);\r\n    }\r\n\r\n    public getHighStakeInfo(): Promise<jackpotStakesInterface> {\r\n        return this.Jackpot.getHighStakeInfo().then(data => this.highStakeInfo = data);\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        this.getUsers();\r\n        this.getPreviousAction();\r\n        this.getWinnerInfo();\r\n        this.getJackpotInfo();\r\n        this.getLowStakeInfo();\r\n        this.getHighStakeInfo();\r\n\r\n\r\n        jQuery(document).ready(function() {\r\n            (function($) {\r\n                var counter = 0;\r\n                var top = \"\";\r\n                var sample = new Audio(\"sounds/slot_jackpot.mp3\");\r\n                var w = new Audio(\"sounds/bell_ring.mp3\");\r\n                function slot() {\r\n                    var duration = 100;\r\n                    $(\"div.select-winner\").animate({\r\n                        top: -$(\"div.select-winner\").height(),\r\n                    }, duration, function() {\r\n                        $(this).css('top', 0);\r\n                        counter++;\r\n                        if (counter < 10 * 7) {\r\n                            slot();\r\n                        } else {\r\n                            $(\"div.select-winner\").css('top', -$(\"div.select-winner\").height() + 3 * 90);\r\n                            var max = $(\"div.select-winner\").children('div').length / 2 - 1;\r\n                            var min = 0;\r\n                            var index = Math.floor(Math.random() * (max - min + 1)) + min;\r\n                            duration = 2500;\r\n                            top = (-90 * (index + 1)).toString();\r\n                            $(\"div.select-winner\").animate({ top: top }, duration, 'easeOutExpo', function() {\r\n                                var winner = $(\"div.participants\").children('div').eq(index);\r\n                                $(\"div.winner .circle-winner\").css(\"background-image\", \"url(\" + winner.find(\"img\").attr(\"src\") + \")\");\r\n                                $(\"div.win-info span.name\").text(winner.find(\"span.name\").text());\r\n                                $(\"div.winner\").delay(1000).fadeIn(300, function() {\r\n                                    w.play();\r\n                                    $(\"div.select-winner > div\").slice(-max - 1).remove();\r\n                                    $(\"div.select-winner\").css('top', 0);\r\n                                    $(\"#enter-jackpot\").prop('disabled', false);\r\n                                    counter = 0;\r\n                                });\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n                function enterJackpot() {\r\n                    $(\"div.select-winner > *\").clone().appendTo($(\"div.select-winner\"));\r\n                    sample.play();\r\n                    slot();\r\n                    $(\"div.winner\").hide();\r\n                    $(\".circle-winner\").css(\"visibility\", \"visible\");\r\n                    $(\"div.circle-winner\").show();\r\n                }\r\n                $(\"#enter-jackpot\").click(function(e) {\r\n                    $(this).prop('disabled', true);\r\n                    e.preventDefault();\r\n                    enterJackpot();\r\n                });\r\n            })(jQuery);\r\n        });\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}